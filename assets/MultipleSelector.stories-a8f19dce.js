import{j as v}from"./jsx-runtime-ffb262ed.js";import{r as _}from"./index-76fb7be0.js";import{c as k}from"./index-a587463d.js";import{c}from"./_commonjsHelpers-de833af9.js";var M={},R={},E={},$={};Object.defineProperty($,"__esModule",{value:!0});var fe=["pageX","pageY","clientX","clientY"];function V(r,l){fe.forEach(function(e){typeof r[e]>"u"&&(r[e]=r[l][0][e])})}function de(r){if(r.type.includes("mouse"))return r;try{r.type==="touchstart"?V(r,"targetTouches"):r.type==="touchmove"&&V(r,"changedTouches")}catch(l){console.error(l.message)}return r}$.castTouchToMouseEvent=de;var F={};Object.defineProperty(F,"__esModule",{value:!0});function pe(r,l,e){return l===void 0&&(l=1),e===void 0&&(e={}),r.metaKey&&!e.allowMetaClick||r.ctrlKey&&!e.allowCtrlClick||r.altKey&&!e.allowAltClick||r.shiftKey&&!e.allowShiftClick?!1:"buttons"in r?r.buttons===l:"which"in r?r.which===l:r.button===l-1}F.detectMouseButton=pe;var W={};Object.defineProperty(W,"__esModule",{value:!0});var he=function(r,l,e){var t=e.tolerance,o=t===void 0?0:t,n=e.useOffsetSize,s=n===void 0?!1:n,i=s?r.offsetHeight:r.height,a=s?l.offsetHeight:l.height,p=s?r.offsetWidth:r.width,u=s?l.offsetWidth:l.width;return!(r.top+i-o<l.top||r.top+o>l.top+a||r.left+p-o<l.left||r.left+o>l.left+u)};function z(r){return Array.isArray(r)?r:[r]}function me(r,l,e,t){e===void 0&&(e=0),t===void 0&&(t=1);for(var o=z(r),n=z(l),s=0;s<o.length;s++)for(var i=0;i<n.length;i++)return he(o[s],n[i],{tolerance:e,useOffsetSize:t===1})}W.doObjectsCollide=me;var I={};Object.defineProperty(I,"__esModule",{value:!0});function ve(){var r=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),l=Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft);return{documentScrollTop:r,documentScrollLeft:l}}I.getDocumentScroll=ve;function Se(r,l){l===void 0&&(l={scrollTop:0,scrollLeft:0});var e=l.scrollTop,t=l.scrollLeft;return Array.from(r.getClientRects()).map(function(o){return{top:o.top+e,left:o.left+t,offsetWidth:r.offsetWidth,offsetHeight:r.offsetHeight,width:o.width,height:o.height}})}I.getBoundsForNode=Se;var Y={};Object.defineProperty(Y,"__esModule",{value:!0});function ge(r,l){for(;r;){if(r===l)return!0;r=r.parentNode}return!1}Y.isNodeInRoot=ge;(function(r){function l(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),r.noop=function(){},l($),l(F),l(W),l(I),l(Y)})(E);var C={},ye=c&&c.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(C,"__esModule",{value:!0});var _e=ye(_),K=E;C.SelectableGroupContext=_e.default.createContext({selectable:{register:function(r){},unregister:function(r){},selectAll:K.noop,clearSelection:K.noop,getScrolledContainer:function(){return null}}});var H={},xe=c&&c.__read||function(r,l){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var t=e.call(r),o,n=[],s;try{for(;(l===void 0||l-- >0)&&!(o=t.next()).done;)n.push(o.value)}catch(i){s={error:i}}finally{try{o&&!o.done&&(e=t.return)&&e.call(t)}finally{if(s)throw s.error}}return n},be=c&&c.__importStar||function(r){if(r&&r.__esModule)return r;var l={};if(r!=null)for(var e in r)Object.hasOwnProperty.call(r,e)&&(l[e]=r[e]);return l.default=r,l};Object.defineProperty(H,"__esModule",{value:!0});var P=be(_),we={y:0,x:0,width:0,height:0};function oe(r){var l=r.fixedPosition,e=r.getSetState,t=r.className,o=xe(P.useState(we),2),n=o[0],s=o[1];P.useEffect(function(){e(s)},[]);var i={left:n.x,top:n.y,width:n.width,height:n.height,zIndex:9e3,position:l?"fixed":"absolute",cursor:"default",willChange:"transform",transform:"translateZ(0)"};return P.default.createElement("div",{className:t,style:i})}H.Selectbox=oe;oe.defaultProps={className:"selectable-selectbox"};var Ce=c&&c.__extends||function(){var r=function(l,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])},r(l,e)};return function(l,e){r(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),D=c&&c.__assign||function(){return D=Object.assign||function(r){for(var l,e=1,t=arguments.length;e<t;e++){l=arguments[e];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(r[o]=l[o])}return r},D.apply(this,arguments)},w=c&&c.__values||function(r){var l=typeof Symbol=="function"&&Symbol.iterator,e=l&&r[l],t=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},le=c&&c.__read||function(r,l){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var t=e.call(r),o,n=[],s;try{for(;(l===void 0||l-- >0)&&!(o=t.next()).done;)n.push(o.value)}catch(i){s={error:i}}finally{try{o&&!o.done&&(e=t.return)&&e.call(t)}finally{if(s)throw s.error}}return n},x=c&&c.__spread||function(){for(var r=[],l=0;l<arguments.length;l++)r=r.concat(le(arguments[l]));return r},Oe=c&&c.__importStar||function(r){if(r&&r.__esModule)return r;var l={};if(r!=null)for(var e in r)Object.hasOwnProperty.call(r,e)&&(l[e]=r[e]);return l.default=r,l};Object.defineProperty(R,"__esModule",{value:!0});var L=Oe(_),S=E,Me=C,Le=H,je=function(r){Ce(l,r);function l(){var e=r!==null&&r.apply(this,arguments)||this;return e.state={selectionMode:!1},e.mouseDownStarted=!1,e.mouseMoveStarted=!1,e.mouseMoved=!1,e.mouseUpStarted=!1,e.selectionStarted=!1,e.deselectionStarted=!1,e.mouseDownData={selectboxY:0,selectboxX:0,target:null},e.registry=new Set,e.selectedItems=new Set,e.selectingItems=new Set,e.ignoreCheckCache=new Map,e.ignoreList=e.props.ignoreList.concat([".selectable-select-all",".selectable-deselect-all"]),e.ignoreListNodes=[],e.setSelectboxState=null,e.selectableGroup=null,e.scrollContainer=null,e.maxScrollTop=0,e.maxScrollLeft=0,e.scrollBounds=null,e.containerScroll={scrollTop:0,scrollLeft:0},e.documentScroll={scrollTop:0,scrollLeft:0},e.saveContainerScroll=function(){var t=e.scrollContainer,o=t.scrollTop,n=t.scrollLeft;e.containerScroll={scrollTop:o,scrollLeft:n}},e.saveDocumentScroll=function(){var t=S.getDocumentScroll(),o=t.documentScrollLeft,n=t.documentScrollTop;e.documentScroll={scrollTop:n,scrollLeft:o}},e.updateRegistry=function(){var t,o;try{for(var n=w(e.registry.values()),s=n.next();!s.done;s=n.next()){var i=s.value;i.updateBounds(e.containerDocumentScroll)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}},e.registerSelectable=function(t){e.registry.add(t),t.state.isSelected&&e.selectedItems.add(t)},e.unregisterSelectable=function(t){e.registry.delete(t);var o=e.selectedItems.has(t)||e.selectingItems.has(t);e.selectedItems.delete(t),e.selectingItems.delete(t),o&&e.props.onSelectedItemUnmount(t,x(e.selectedItems))},e.updateContainerScroll=function(t){var o=e.containerScroll,n=o.scrollTop,s=o.scrollLeft;e.checkScrollTop(t.clientY,n),e.checkScrollBottom(t.clientY,n),e.checkScrollLeft(t.clientX,s),e.checkScrollRight(t.clientX,s)},e.getScrollStep=function(t){var o=e.props,n=o.minimumSpeedFactor,s=o.scrollSpeed;return Math.max(t,n)*s},e.checkScrollTop=function(t,o){var n=e.scrollBounds.top-t;(n>0||t<0)&&(e.scrollContainer.scrollTop=o-e.getScrollStep(n))},e.checkScrollBottom=function(t,o){var n=t-e.scrollBounds.bottom;if(n>0||t>window.innerHeight){var s=o+e.getScrollStep(n);e.scrollContainer.scrollTop=Math.min(s,e.maxScrollTop)}},e.checkScrollLeft=function(t,o){var n=e.scrollBounds.left-t;if(n>0||t<0){var s=o-e.getScrollStep(n);e.scrollContainer.scrollLeft=s}},e.checkScrollRight=function(t,o){var n=t-e.scrollBounds.right;if(n>0||t>window.innerWidth){var s=o+e.getScrollStep(n);e.scrollContainer.scrollLeft=Math.min(s,e.maxScrollLeft)}},e.updateSelectBox=function(t){var o=S.castTouchToMouseEvent(t);if(e.updateContainerScroll(o),!e.mouseMoveStarted){e.mouseMoveStarted=!0,e.mouseMoved=!0;var n=e.mouseDownData,s=o.clientX,i=o.clientY,a=i-e.scrollBounds.top+e.containerScroll.scrollTop,p=Math.min(a,n.selectboxY),u=s-e.scrollBounds.left+e.containerScroll.scrollLeft,m=Math.min(u,n.selectboxX),d={x:m,y:p,width:Math.abs(u-n.selectboxX),height:Math.abs(a-n.selectboxY)};e.setSelectboxState(d);var y={top:d.y+e.scrollBounds.top+e.documentScroll.scrollTop,left:d.x+e.scrollBounds.left+e.documentScroll.scrollLeft,width:d.width,height:d.height,offsetWidth:d.width||1,offsetHeight:d.height||1};e.selectItems(y),e.props.duringSelection(x(e.selectingItems)),e.mouseMoveStarted=!1}},e.selectItems=function(t,o){var n,s;o===void 0&&(o={});var i=e.props,a=i.tolerance,p=i.enableDeselect,u=i.mixedDeselect;try{for(var m=w(e.registry.values()),d=m.next();!d.done;d=m.next()){var y=d.value;e.processItem({item:y,selectboxBounds:t,tolerance:a,mixedDeselect:u,enableDeselect:p,isFromClick:o&&o.isFromClick})}}catch(b){n={error:b}}finally{try{d&&!d.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}},e.clearSelection=function(){var t,o;try{for(var n=w(e.selectedItems.values()),s=n.next();!s.done;s=n.next()){var i=s.value;i.setState({isSelected:!1}),e.selectedItems.delete(i)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}e.setState({selectionMode:!1}),e.props.onSelectionFinish(x(e.selectedItems)),e.props.onSelectionClear()},e.selectAll=function(){var t,o;e.removeIgnoredItemsFromRegistry();try{for(var n=w(e.registry.values()),s=n.next();!s.done;s=n.next()){var i=s.value;i.state.isSelected||(i.setState({isSelected:!0}),e.selectedItems.add(i))}}catch(a){t={error:a}}finally{try{s&&!s.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}e.setState({selectionMode:!0}),e.props.onSelectionFinish(x(e.selectedItems))},e.mouseDown=function(t){var o=!t.type.includes("touch")&&!S.detectMouseButton(t,1,{allowAltClick:e.props.allowAltClick,allowCtrlClick:e.props.allowCtrlClick,allowMetaClick:e.props.allowMetaClick,allowShiftClick:e.props.allowShiftClick});if(!(e.mouseDownStarted||e.props.disabled||o)){if(e.removeIgnoredItemsFromRegistry(),e.isInIgnoreList(t.target)){e.mouseDownStarted=!1;return}e.props.resetOnStart&&e.clearSelection(),e.mouseDownStarted=!0,e.mouseUpStarted=!1;var n=S.castTouchToMouseEvent(t);if(!e.props.globalMouse&&!S.isNodeInRoot(n.target,e.selectableGroup)){var s=le(S.getBoundsForNode(e.selectableGroup,e.documentScroll),1),i=s[0],a=S.doObjectsCollide({top:i.top,left:i.left,width:0,height:0,offsetHeight:i.offsetHeight,offsetWidth:i.offsetWidth},{top:n.pageY,left:n.pageX,width:0,height:0,offsetWidth:0,offsetHeight:0});if(!a)return}e.updateRootBounds(),e.updateRegistry(),e.mouseDownData={target:n.target,selectboxY:n.clientY-e.scrollBounds.top+e.containerScroll.scrollTop,selectboxX:n.clientX-e.scrollBounds.left+e.containerScroll.scrollLeft},n.preventDefault(),document.addEventListener("mousemove",e.updateSelectBox),document.addEventListener("touchmove",e.updateSelectBox),document.addEventListener("mouseup",e.mouseUp),document.addEventListener("touchend",e.mouseUp)}},e.mouseUp=function(t){var o,n;if(!e.mouseUpStarted&&(e.mouseUpStarted=!0,e.mouseDownStarted=!1,e.removeTempEventListeners(),!!e.mouseDownData)){var s=S.castTouchToMouseEvent(t),i=s.pageX,a=s.pageY;if(!e.mouseMoved&&S.isNodeInRoot(s.target,e.selectableGroup))e.handleClick(s,a,i);else{try{for(var p=w(e.selectingItems.values()),u=p.next();!u.done;u=p.next()){var m=u.value;m.setState({isSelected:!0,isSelecting:!1})}}catch(d){o={error:d}}finally{try{u&&!u.done&&(n=p.return)&&n.call(p)}finally{if(o)throw o.error}}e.selectedItems=new Set(x(e.selectedItems,e.selectingItems)),e.selectingItems.clear(),s.which===1&&e.mouseDownData.target===s.target&&e.preventEvent(s.target,"click"),e.setSelectboxState({x:0,y:0,width:0,height:0}),e.props.onSelectionFinish(x(e.selectedItems))}e.toggleSelectionMode(),e.cleanUp(),e.mouseMoved=!1}},e.keyListener=function(t){t.keyCode===27&&e.clearSelection()},e.getGroupRef=function(t){e.selectableGroup=t},e.getSelectboxSetState=function(t){e.setSelectboxState=t},e.defaultContainerStyle={position:"relative"},e.contextValue={selectable:{register:e.registerSelectable,unregister:e.unregisterSelectable,selectAll:e.selectAll,clearSelection:e.clearSelection,getScrolledContainer:function(){return e.scrollContainer}}},e}return l.prototype.componentDidMount=function(){this.props.scrollContainer?this.scrollContainer=document.querySelector(this.props.scrollContainer):this.scrollContainer=this.selectableGroup,this.scrollContainer.addEventListener("scroll",this.saveContainerScroll),document.addEventListener("scroll",this.saveDocumentScroll),this.selectableGroup.addEventListener("mousedown",this.mouseDown),this.selectableGroup.addEventListener("touchstart",this.mouseDown),this.props.deselectOnEsc&&(document.addEventListener("keydown",this.keyListener),document.addEventListener("keyup",this.keyListener)),this.removeIgnoredItemsFromRegistry()},l.prototype.componentWillUnmount=function(){this.scrollContainer.removeEventListener("scroll",this.saveContainerScroll),document.removeEventListener("scroll",this.saveDocumentScroll),this.selectableGroup.removeEventListener("mousedown",this.mouseDown),this.selectableGroup.removeEventListener("touchstart",this.mouseDown),this.props.deselectOnEsc&&(document.removeEventListener("keydown",this.keyListener),document.removeEventListener("keyup",this.keyListener)),this.removeTempEventListeners(),this.selectedItems.clear(),this.selectingItems.clear()},Object.defineProperty(l.prototype,"containerDocumentScroll",{get:function(){return{scrollTop:this.containerScroll.scrollTop+this.documentScroll.scrollTop,scrollLeft:this.containerScroll.scrollLeft+this.documentScroll.scrollLeft}},enumerable:!0,configurable:!0}),l.prototype.removeTempEventListeners=function(){document.removeEventListener("mousemove",this.updateSelectBox),document.removeEventListener("touchmove",this.updateSelectBox),document.removeEventListener("mouseup",this.mouseUp),document.removeEventListener("touchend",this.mouseUp)},l.prototype.updateRootBounds=function(){this.scrollBounds=this.scrollContainer.getBoundingClientRect(),this.maxScrollTop=this.scrollContainer.scrollHeight-this.scrollContainer.clientHeight,this.maxScrollLeft=this.scrollContainer.scrollWidth-this.scrollContainer.clientWidth},l.prototype.toggleSelectionMode=function(){var e=this,t=e.selectedItems,o=e.state.selectionMode;t.size&&!o&&this.setState({selectionMode:!0}),!t.size&&o&&this.setState({selectionMode:!1})},l.prototype.processItem=function(e){var t=e.item,o=e.tolerance,n=e.selectboxBounds,s=e.enableDeselect,i=e.mixedDeselect,a=e.isFromClick,p=this.props.delta,u=S.doObjectsCollide(n,t.bounds,o,p),m=t.state,d=m.isSelecting,y=m.isSelected;if(a&&u)return y?this.selectedItems.delete(t):this.selectedItems.add(t),t.setState({isSelected:!y}),this.clickedItem=t,t;if(!a&&u){if(y&&s&&(!this.selectionStarted||i))return t.setState({isSelected:!1}),t.deselected=!0,this.deselectionStarted=!0,this.selectedItems.delete(t);var b=i?!t.deselected:!this.deselectionStarted;if(!d&&!y&&b)return t.setState({isSelecting:!0}),this.selectionStarted=!0,this.selectingItems.add(t),{updateSelecting:!0}}return!a&&!u&&d&&this.selectingItems.has(t)?(t.setState({isSelecting:!1}),this.selectingItems.delete(t),{updateSelecting:!0}):null},l.prototype.isInIgnoreList=function(e){if(e){if(this.ignoreCheckCache.get(e)!==void 0)return this.ignoreCheckCache.get(e);var t=this.ignoreListNodes.some(function(o){return e===o||o.contains(e)});return this.ignoreCheckCache.set(e,t),t}},l.prototype.removeIgnoredItemsFromRegistry=function(){var e=this;this.ignoreListNodes=Array.from(document.querySelectorAll(this.ignoreList.join(", "))),this.registry=new Set(x(this.registry).filter(function(t){return!e.isInIgnoreList(t.node)})),this.selectedItems=new Set(x(this.selectedItems).filter(function(t){return!e.isInIgnoreList(t.node)}))},l.prototype.preventEvent=function(e,t){var o=function(n){e.removeEventListener(t,o,!0),n.preventDefault(),n.stopPropagation()};e.addEventListener(t,o,!0)},l.prototype.cleanUp=function(){var e,t;if(this.deselectionStarted=!1,this.selectionStarted=!1,this.props.mixedDeselect)try{for(var o=w(this.registry.values()),n=o.next();!n.done;n=o.next()){var s=n.value;s.deselected=!1}}catch(i){e={error:i}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},l.prototype.handleClick=function(e,t,o){if(this.props.selectOnClick){var n=this.props,s=n.clickClassName,i=n.allowClickWithoutSelected,a=n.onSelectionFinish,p=e.target.classList||[],u=Array.from(p).includes(s);(i||this.selectedItems.size||u||e.ctrlKey)&&(this.selectItems({top:t,left:o,width:0,height:0,offsetWidth:0,offsetHeight:0},{isFromClick:!0}),a(x(this.selectedItems),this.clickedItem),e.which===1&&this.preventEvent(e.target,"click"),(e.which===2||e.which===3)&&this.preventEvent(e.target,"contextmenu"))}},l.prototype.render=function(){var e=this.state.selectionMode,t=this.props,o=t.component,n=o===void 0?"div":o,s=t.className,i=t.style,a=t.selectionModeClass,p=t.fixedPosition,u=t.selectboxClassName,m=t.children;return L.default.createElement(Me.SelectableGroupContext.Provider,{value:this.contextValue},L.default.createElement(n,{ref:this.getGroupRef,style:D(D({},this.defaultContainerStyle),i),className:s+" "+(e?a:"")},m,L.default.createElement(Le.Selectbox,{getSetState:this.getSelectboxSetState,className:u,fixedPosition:p})))},l.defaultProps={clickClassName:"",tolerance:0,globalMouse:!1,ignoreList:[],scrollSpeed:.25,minimumSpeedFactor:60,duringSelection:S.noop,onSelectionFinish:S.noop,onSelectionClear:S.noop,onSelectedItemUnmount:S.noop,allowClickWithoutSelected:!0,selectionModeClass:"in-selection-mode",resetOnStart:!1,disabled:!1,deselectOnEsc:!0,fixedPosition:!1,delta:1,allowAltClick:!1,allowCtrlClick:!1,allowMetaClick:!1,allowShiftClick:!1,selectOnClick:!0},l}(L.Component);R.SelectableGroup=je;var U={},De=c&&c.__extends||function(){var r=function(l,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])},r(l,e)};return function(l,e){r(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),N=c&&c.__assign||function(){return N=Object.assign||function(r){for(var l,e=1,t=arguments.length;e<t;e++){l=arguments[e];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(r[o]=l[o])}return r},N.apply(this,arguments)},Ee=c&&c.__importStar||function(r){if(r&&r.__esModule)return r;var l={};if(r!=null)for(var e in r)Object.hasOwnProperty.call(r,e)&&(l[e]=r[e]);return l.default=r,l};Object.defineProperty(U,"__esModule",{value:!0});var Z=Ee(_),Ie=E,Te=C;U.createSelectable=function(r){var l;return l=function(e){De(t,e);function t(){var o=e!==null&&e.apply(this,arguments)||this;return o.state={isSelected:o.props.isSelected,isSelecting:!1},o.node=null,o.bounds=null,o.updateBounds=function(n){o.bounds=Ie.getBoundsForNode(o.node,n)},o.getSelectableRef=function(n){o.node=n},o}return t.prototype.componentDidMount=function(){this.updateBounds(),this.context.selectable.register(this)},t.prototype.componentWillUnmount=function(){this.context.selectable.unregister(this)},t.prototype.render=function(){return Z.default.createElement(r,N({},this.props,this.state,{selectableRef:this.getSelectableRef}))},t}(Z.Component),l.contextType=Te.SelectableGroupContext,l.defaultProps={isSelected:!1},l};var X={},Pe=c&&c.__extends||function(){var r=function(l,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])},r(l,e)};return function(l,e){r(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),A=c&&c.__assign||function(){return A=Object.assign||function(r){for(var l,e=1,t=arguments.length;e<t;e++){l=arguments[e];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(r[o]=l[o])}return r},A.apply(this,arguments)},ke=c&&c.__rest||function(r,l){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&l.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(r);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(r,t[o])&&(e[t[o]]=r[t[o]]);return e},Ne=c&&c.__importStar||function(r){if(r&&r.__esModule)return r;var l={};if(r!=null)for(var e in r)Object.hasOwnProperty.call(r,e)&&(l[e]=r[e]);return l.default=r,l};Object.defineProperty(X,"__esModule",{value:!0});var J=Ne(_),Ae=C,Be=function(r){Pe(l,r);function l(){var e=r!==null&&r.apply(this,arguments)||this;return e.root=null,e.getRootRef=function(t){e.root=t},e}return l.prototype.componentDidMount=function(){this.root.addEventListener("mousedown",function(e){return e.stopPropagation()})},l.prototype.render=function(){var e=this.props,t=e.component,o=t===void 0?"div":t,n=e.children,s=e.className,i=s===void 0?"":s,a=ke(e,["component","children","className"]),p=o;return J.default.createElement(p,A({ref:this.getRootRef,className:"selectable-select-all "+i,onClick:this.context.selectable.selectAll},a),n)},l.contextType=Ae.SelectableGroupContext,l}(J.Component);X.SelectAll=Be;var q={},Ge=c&&c.__extends||function(){var r=function(l,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])},r(l,e)};return function(l,e){r(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),B=c&&c.__assign||function(){return B=Object.assign||function(r){for(var l,e=1,t=arguments.length;e<t;e++){l=arguments[e];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(r[o]=l[o])}return r},B.apply(this,arguments)},Re=c&&c.__rest||function(r,l){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&l.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(r);o<t.length;o++)l.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(r,t[o])&&(e[t[o]]=r[t[o]]);return e},$e=c&&c.__importStar||function(r){if(r&&r.__esModule)return r;var l={};if(r!=null)for(var e in r)Object.hasOwnProperty.call(r,e)&&(l[e]=r[e]);return l.default=r,l};Object.defineProperty(q,"__esModule",{value:!0});var Q=$e(_),Fe=C,We=function(r){Ge(l,r);function l(){var e=r!==null&&r.apply(this,arguments)||this;return e.root=null,e.getRootRef=function(t){e.root=t},e}return l.prototype.componentDidMount=function(){this.root.addEventListener("mousedown",function(e){return e.stopPropagation()})},l.prototype.render=function(){var e=this.props,t=e.component,o=t===void 0?"div":t,n=e.children,s=e.className,i=Re(e,["component","children","className"]),a=o;return Q.default.createElement(a,B({ref:this.getRootRef,className:"selectable-select-all "+s,onClick:this.context.selectable.clearSelection},i),n)},l.contextType=Fe.SelectableGroupContext,l}(Q.Component);q.DeselectAll=We;Object.defineProperty(M,"__esModule",{value:!0});var Ye=R,He=M.SelectableGroup=Ye.SelectableGroup,Ue=U,Xe=M.createSelectable=Ue.createSelectable,qe=X;M.SelectAll=qe.SelectAll;var Ve=q;M.DeselectAll=Ve.DeselectAll;const ze=({cellValue:r,selectableRef:l,isSelecting:e,children:t,selectedAges:o,startAge:n,endAge:s,oneAge:i,disableItems:a})=>v.jsx("div",{ref:l,title:String(r),className:k("multi-selector-cell",{"multi-selector-cell-today":e&&!(a!=null&&a(r)),"multi-selector-cell-selected":o.includes(r),"multi-selector-cell-disabled":a==null?void 0:a(r),"multi-selector-cell-in-range":o.includes(r)&&!i,"multi-selector-cell-start":n,"multi-selector-cell-end":s}),children:v.jsx("div",{className:"multi-selector-cell-inner",children:t})}),Ke=Xe(ze);const Ze=He,G=({className:r,componentsName:l="多重选择器",value:e=[],isEditMode:t=!1,onChange:o,disableItems:n=()=>!1,selectedTitle:s="选择的值",containerWidth:i=682,containerHeight:a=312,defaultOptions:p=[]})=>{const[u,m]=_.useState(e),d=_.useRef(),y=f=>{const h=f+1;return u.includes(h)},b=f=>{const h=f-1;return u.includes(h)},T=f=>u.includes(f),se=_.useMemo(()=>{const f=[];let h=[];for(let g=0;g<u.length;g++)u[g]+1===u[g+1]?h.push(u[g]):(h.push(u[g]),f.push(h),h=[]);return f},[u]);_.useEffect(()=>{o==null||o(u)},[u]);const ie=f=>{const h=f.map(O=>O.props.cellValue),g=h.filter(O=>!u.includes(O));g.length&&m(u.concat(g).sort((O,ue)=>O-ue)),h.length&&d.current&&d.current.clearSelection()},ce=f=>{const h=[...u],g=u.indexOf(f[0]);h.splice(g,f.length),m(h)},ae=()=>{m([])};return v.jsx("div",{className:k("multi-selector",r),style:{width:i},children:v.jsxs("div",{className:"multi-selector-outer-container",children:[v.jsxs("div",{className:"multi-selector-container",style:{height:a},children:[v.jsx("div",{className:"multi-selector-container-header",children:l}),v.jsx("div",{className:"multi-selector-container-body",style:{pointerEvents:t?"none":"auto"},children:v.jsx(Ze,{ref:d,tolerance:0,deselectOnEsc:!1,allowClickWithoutSelected:!0,onSelectionFinish:ie,children:v.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:p.map((f,h)=>v.jsx(Ke,{cellValue:f,disableItems:n,selectedAges:u,oneAge:T(f)&&!y(f)&&!b(f),startAge:T(f)&&y(f)&&!b(f),endAge:T(f)&&!y(f)&&b(f),children:f},h))})})})]}),v.jsxs("div",{className:"multi-selector-selectedDate",children:[v.jsxs("div",{className:"multi-selector-selectedDate-header",children:[v.jsx("span",{children:s}),v.jsx("span",{onClick:ae,className:k({"multi-selector-selectedDate-notAllow-clear":t}),children:"清空已选"})]}),v.jsx("div",{className:"multi-selector-selectedDate-body",style:{maxHeight:a>72?a-72:72},children:se.map((f,h)=>v.jsxs("span",{className:"multi-selector-selectedDate-tag",children:[f[0]," ~ ",f[f.length-1],v.jsx("span",{style:{cursor:"pointer"},onClick:g=>{t||(g.preventDefault(),ce(f))},children:" x"})]},h))})]})]})})};try{G.displayName="MultipleSelector",G.__docgenInfo={description:"",displayName:"MultipleSelector",props:{className:{defaultValue:null,description:"component class name",name:"className",required:!1,type:{name:"string"}},componentsName:{defaultValue:{value:"多重选择器"},description:"Components name",name:"componentsName",required:!1,type:{name:"string"}},value:{defaultValue:{value:"[]"},description:"value",name:"value",required:!1,type:{name:"number[]"}},onChange:{defaultValue:null,description:"Function for value change",name:"onChange",required:!1,type:{name:"((value: number[]) => void)"}},isEditMode:{defaultValue:{value:"false"},description:"Can be edit or not",name:"isEditMode",required:!1,type:{name:"boolean"}},disableItems:{defaultValue:{value:"() => false"},description:"Disable items",name:"disableItems",required:!1,type:{name:"((current: number) => boolean)"}},selectedTitle:{defaultValue:{value:"选择的值"},description:"Title for selected area",name:"selectedTitle",required:!1,type:{name:"string"}},containerWidth:{defaultValue:{value:"682"},description:"Container width",name:"containerWidth",required:!1,type:{name:"number"}},containerHeight:{defaultValue:{value:"312"},description:"Container height",name:"containerHeight",required:!1,type:{name:"number"}},defaultOptions:{defaultValue:{value:"[]"},description:"Options for component",name:"defaultOptions",required:!1,type:{name:"number[]"}}}}}catch{}const rt={title:"Components/MultipleSelector",component:G,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},ne=[];for(let r=1;r<=50;r++)ne.push(r);const j={args:{value:[],onChange:r=>{console.log(r)},defaultOptions:ne}};var ee,te,re;j.parameters={...j.parameters,docs:{...(ee=j.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    value: [],
    onChange: v => {
      console.log(v);
    },
    defaultOptions: defaultOptions
  }
}`,...(re=(te=j.parameters)==null?void 0:te.docs)==null?void 0:re.source}}};const ot=["Primary"];export{j as Primary,ot as __namedExportsOrder,rt as default};
//# sourceMappingURL=MultipleSelector.stories-a8f19dce.js.map
